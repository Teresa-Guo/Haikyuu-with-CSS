<!DOCTYPE html>
<html lang="en">

	<head>

		<meta charset="UTF-8">
		<title>Haikyuu</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
		<link rel="stylesheet" href="stylesheet.css">

	</head>

	<body>
	
		<video id="PV" autoplay muted >
			<source src="startVideo.mp4" type="video/mp4">
		</video>

		<p id="hintText">點擊跳過影片</p>
		
		<img id="endImage" src="image/startImg.jpg" style="opacity: 0;">

		<div id="login">
		
			<h1>登入</h1>
			<form id="form" onsubmit="validate(); return false;">
				<input type="text" id="name" name="name" placeholder="Your Name" required>
				<input type="submit" value="Submit">
			</form>
			
		</div>
		
	</body>

	<script>
	
		var video = $('#PV');
		var image = $('#endImage');
		var flag = 0;

		function showImage() {
			var video = document.getElementById('PV');
			var image = document.getElementById('endImage');
			var hintText = document.getElementById('hintText');

			// 使用 CSS transition 達到 fadeOut 效果
			video.style.transition = 'opacity 0.5s';
			video.style.opacity = '0';

			// 設定圖片透明度為 1
			image.style.opacity = '1';

			// 修改提示文字
			hintText.textContent = '點擊進入主頁面';
		}

		video.on('ended', function() {
			showImage();
			flag=1;
		});

		// Event listener for screen click to skip video
		$(document).on('click', function() {
			if (flag === 0) {
				showImage();
				flag = 1;
			} else {
				$('#login').fadeIn();
				$('#hintText').remove();
			}
		}); 

		function validate() {
			var name = $('#name').val();

			if (name) {
				 // window.location.href 表示當前視窗的 URL，透過重新指定可以將當前頁面連向指定的 URL
				 window.location.href = "index.html"
			} 
		}
		
	</script>

</html>